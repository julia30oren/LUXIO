<div>
    <div *ngIf="!new_form_open">
        <button class="btn btn-secondary btn-lg btn-block" type="button" (click)="openForm()">create / modify product</button>
    </div>
    <div class="form" *ngIf="new_form_open">
        <form [formGroup]="formTemplate" (submit)="onSubmit(formTemplate.value)">
            <!-- <p>{{selectedProd | json}}</p> -->

            <div class="form-row align-items-center">
                <div class="col-sm-4 my-1">
                    <label for="idInput">ID:</label>
                    <input value="selectedProd[0].burcode_id" formControlName="burcode_id" [ngClass]="{error: isSubmitted && formControls.burcode_id.errors?.required}" placeholder="burcode_id" type="text" class="form-control" placeholder="Last 3 numbers on barcode">
                </div>

                <div class="col-sm-4 my-1">
                    <label for="nameInput">Name:</label>
                    <input formControlName="name" [ngClass]="{error: isSubmitted && formControls.name.errors?.required}" placeholder="name" type="text" #name class="form-control" id="nameInput" placeholder="Product name">
                </div>

                <div class="col-sm-4 my-1">
                    <label for="classSelect">Class:</label>
                    <select formControlName="prod_class" [ngClass]="{error: isSubmitted && formControls.prod_class.errors?.required}" placeholder="prod_class" class="custom-select" id="classSelect">
                        <option value='' selected>Not seleced...</option>
                        <option value="basics">Bases / Tops / BUILD</option>
                        <option value="Luxio">Luxio GEL</option>
                        <option value="Options">Options</option>
                        <option value="Gel Play">Gel Play</option>
                        <option value="Hard GEL">Hard GEL</option>
                        <option value="materials">Technical materials</option>
                        <option value="accessories">Accessories</option>
                    </select>
                </div>

            </div>

            <div class="form-row align-items-center">
                <div class="col-sm-4 my-1">
                    <label for="colorInput">Color:</label>
                    <select formControlName="color" placeholder="color" class="custom-select" id="colorInput">
                  <option value='' selected>Not seleced...</option>
                  <option value='white'>white</option>
                  <option value='black'>black</option>
                  <option value='pink' style="color:rgb(247, 133, 152);">pink</option>
                  <option value='red' style="color:red;">red</option>
                  <option value='оrange' style="color:orange;">оrange</option>
                  <option value='yellow' style="color: rgb(219, 187, 1);">yellow</option>
                  <option value='green' style="color: green;">green</option>
                  <option value='blue' style="color: blue;">blue</option>
                  <option value='violet' style="color: rgb(139, 0, 139);">violet</option>
                  <option value='brown' style="color: brown;">brown</option>
                  <option value='gray' style="color: rgb(109, 109, 109);">gray</option>
                </select>
                </div>

                <div class="col-sm-4 my-1">
                    <label for="tintSelect">Tint:</label>
                    <select formControlName="tint" placeholder="tint" class="custom-select" id="tintSelect" #tint>
                  <option value="" selected>Not seleced...</option>
                  <option value='light'>light</option>
                  <option value='dark'>dark</option>
                  <option value='bright'>bright</option>
                </select>
                </div>

                <div class="col-sm-4 my-1">
                    <label for="transparencySelect">Transparency:</label>
                    <select formControlName="transparency" placeholder="transparency" class="custom-select" id="transparencySelect" #transparency>
                  <option value="" selected>Not seleced...</option>
                  <option value='see-through'>see-through</option>
                  <option value='dense'>dense</option>
                </select>
                </div>
            </div>

            <div class="form-row align-items-center">
                <div class="col-sm-4 my-1">
                    <label for="priceInput">Price:</label>
                    <input formControlName="price" [ngClass]="{error: isSubmitted && formControls.price.errors?.required}" placeholder="price" type="text" class="form-control" id="priceInput" placeholder="&#8362;" #price>
                </div>

                <div class="col-sm-4 my-1">
                    <label for="labelSelect">Label:</label>
                    <select formControlName="label" placeholder="label" class="custom-select" id="labelSelect" #label>
                  <option value="" selected>Not seleced...</option>
                  <option value='New'>New</option>
                  <option value='Special offer'>Special offer</option>
                  <option value='Best seller'>Best seller</option>
                  <option value='Out of stock'>Out of stock</option>
                  <option value='Coming soon'>Coming soon</option>
                </select>
                </div>

                <div class="col-sm-4 my-1">
                    <label>Image link:</label>
                    <input formControlName="img_link" placeholder="Iamge link" (ngModelChange)="showImg($event)" type="text" class="form-control">
                </div>

            </div>
            <div class="form-row align-items-center">
                <div class="col-sm-8 my-1">
                    <label for="Textarea">Extra textarea (english):</label>
                    <textarea class="form-control" id="Textarea" formControlName="coment_eng"></textarea>

                    <label for="Textarea">Extra textarea (русский):</label>
                    <textarea class="form-control" id="Textarea" formControlName="coment_rus"></textarea>

                    <label for="Textarea">Extra textarea (עברית):</label>
                    <textarea class="form-control" id="Textarea" formControlName="coment_iv"></textarea>
                </div>

                <div class="col-sm-4 my-1" style="height: 300px; background-image: url('https://thumbs.dreamstime.com/b/no-image-available-icon-photo-camera-flat-vector-illustration-132483141.jpg'); background-size: 100% 100%; background-repeat: no-repeat;">
                    <img src={{imgSelected}} *ngIf="imgSelected" alt="No image" style="height: 100%; width: 100%;">
                </div>
            </div>

            <div class="form-row align-items-center">
                <div class="col-sm-3 my-1">
                    <button type="button" class="btn btn-secondary btn-lg btn-block" (click)="clearForm()">Clear form</button>
                </div>
                <div class="col-sm-8 my-1">
                    <button type="submit" class="btn btn-secondary btn-lg btn-block">Save</button>
                </div>
                <div class="col-sm-1 my-1">
                    <button type="button" class="btn btn-secondary btn-lg btn-block" (click)="openForm()"><i class="far fa-window-close fa-2x closeButton"></i></button>
                </div>
            </div>
        </form>
    </div>

    <br>

    <!-- <div class="search">
        <input type="text" class="form-control" [(ngModel)]="searchText" #searchtext (ngModelChange)="searchItem(searchtext.value)" id="search" placeholder="Search...">
    </div> -->

    <br>

    <div class="shopComp" *ngIf="shop">
        <div *ngFor="let item of shop" id={{item.burcode_id}} class="card mb-3" style="width: 100%;">
            <div class="row no-gutters">
                <div class="col-md-4">
                    <img src={{item.img_link}} class="card-img" alt="..." (click)="select(item.burcode_id)">
                </div>
                <div class="col-md-8">
                    <div class="card-body">
                        <p class="card-text"><small class="text-muted"># {{item.burcode_id}}</small></p>
                        <h5 class="card-title">{{item.prod_class}} {{item.name}}</h5>
                        <p class="card-text">{{item.coment_eng}}</p>
                        <p class="card-text">{{item.coment_rus}}</p>
                        <p class="card-text" style="text-align: right;">{{item.coment_iv}}</p>
                        <p class="card-text"><small class="text-muted">{{item.price}} &#8362;</small></p>
                        <p class="card-text"><small class="text-muted" *ngIf="item.label">{{item.label}} | </small>
                            <small class="text-muted" *ngIf="item.color">{{item.color}} | </small>
                            <small class="text-muted" *ngIf="item.tint">{{item.tint}} | </small>
                            <small class="text-muted" *ngIf="item.label">{{item.transparency}}</small></p>
                        <div class="delButton">
                            <button type="button" class="btn btn-outline-warning" (click)="select(item.burcode_id)">Edit</button>
                            <button type="button" class="btn btn-outline-danger" (click)="delete(item._id)" style="margin-left: 15px;">Delete this</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- <div class="shopComp " *ngIf="searchRes ">
        <div *ngFor="let item of searchRes " id={{item.burcode_id}} class="card mb-3 " style="width: 100%; ">
            <div class="row no-gutters ">
                <div class="col-md-4 ">
                    <img src={{item.img_link}} class="card-img " alt="... " (click)="select(item.burcode_id) ">
                </div>
                <div class="col-md-8 ">
                    <div class="card-body ">
                        <p class="card-text "><small class="text-muted "># {{item.burcode_id}}</small></p>
                        <h5 class="card-title ">{{item.prod_class}} {{item.name}}</h5>
                        <p class="card-text ">{{item.coment_eng}}</p>
                        <p class="card-text ">{{item.coment_rus}}</p>
                        <p class="card-text " style="text-align: right; ">{{item.coment_iv}}</p>
                        <p class="card-text "><small class="text-muted ">{{item.price}} &#8362;</small></p>
                        <p class="card-text "><small class="text-muted " *ngIf="item.label ">{{item.label}} | </small>
                            <small class="text-muted " *ngIf="item.color ">{{item.color}} | </small>
                            <small class="text-muted " *ngIf="item.tint ">{{item.tint}} | </small>
                            <small class="text-muted " *ngIf="item.label ">{{item.transparency}} | </small></p>
                    </div>
                </div>
            </div>
        </div>
    </div> -->

</div>

<style>
    .form {
        border: black solid 2px;
        padding: 1%;
    }
    
    .error {
        border: red solid 1.5px;
    }
    
    .shopComp {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
    }
    
    .delButton {
        position: absolute;
        bottom: 20px;
        right: 20px;
    }
</style>